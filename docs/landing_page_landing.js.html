<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: landing_page/landing.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: landing_page/landing.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>window.addEventListener("DOMContentLoaded", init);
var selectedCategory = "";

import * as analyticsManager from '../analyticsmanager.js';
const analyticsPageName = "landing"
/**
 * initialize function, called once whole DOM is parsed
 */
function init() {
  // localStorage cleared to reset question type and constellation
  localStorage.clear();

  // Create a new session for analytics
  analyticsManager.setEmptySession();

  const continueButton = document.getElementById("continue-button");
  continueButton.classList.add("hidden");

  const dailyButton = document.getElementById("daily-horoscope-button");
  dailyButton.addEventListener("click", function () {
    const daily = "daily"
    selectedCategory = daily;
    analyticsManager.addSessionCategorySelected(daily);
    setSelection(dailyButton, continueButton);
  });
  const relationshipButton = document.getElementById("relationship-button");
  relationshipButton.addEventListener("click", function () {
    const relationship = "relationship";
    selectedCategory = relationship;
    analyticsManager.addSessionCategorySelected(relationship);
    setSelection(relationshipButton, continueButton);
  });
  const careerButton = document.getElementById("career-button");
  careerButton.addEventListener("click", function () {
    const career = "career"
    selectedCategory = career;
    analyticsManager.addSessionCategorySelected(career);
    setSelection(careerButton, continueButton);
  });
  const healthButton = document.getElementById("health-button");
  healthButton.addEventListener("click", function () {
    const health = "health"
    selectedCategory = health;
    analyticsManager.addSessionCategorySelected(health);
    setSelection(healthButton, continueButton);
  });
  continueButton.addEventListener("click", toSkyMapPage);
}

/**
 * All buttons besides the passed button are set to deselected, if the
 * passed button is already selected, its colors become deselected and the
 * selected question type is reset, the button to continue only becomes
 * available when a button is set to selected
 * @param {Button} passedButton
 * @param {Button} continueButton
 */
function setSelection(passedButton, continueButton) {
  var categoryButtons = document.getElementsByClassName("category");
  // set all other buttons to deselected
  [].forEach.call(categoryButtons, function (btn) {
    if (btn !== passedButton) {
      btn.classList.remove("selected");
    }
  });
  // if button was already selected, make it deselected
  if (passedButton.classList.contains("selected")) {
    passedButton.classList.remove("selected");
    selectedCategory = "";
    continueButton.classList.add("hidden");
  } else {
    passedButton.classList.add("selected");
    continueButton.classList.remove("hidden");
  }
}

/**
 * Adds the type of question into localStorage under the key "questionType",
 * and routes to skymap page
 */
function toSkyMapPage() {
  localStorage.setItem("questionType", selectedCategory);
  window.location.href = "../skymap_page/skymap.html";
  console.log(selectedCategory);
}

/**
 * Start time tracker on initial dom content load
 */
var startTime;
document.addEventListener("DOMContentLoaded", () => {
  startTime = new Date();
  console.log("Starting time");
})

document.addEventListener("beforeunload", () => {
  console.log("Posting");
  const endTime = new Date();
  analyticsManager.addSessionPageTime(analyticsPageName, endTime.getTime() - startTime.getTime());
  analyticsManager.sessionPOST();
})

/**
 * Listen for visibility changes for end time and push, or start time
 * again
 */
document.addEventListener("visibilitychange", () => {
  if (document.visibilityState === "visible") {
    console.log("Restarting time");
    startTime = new Date();
  } else {
    console.log("Posting");
    const endTime = new Date();
    analyticsManager.addSessionPageTime(analyticsPageName, endTime.getTime() - startTime.getTime());
    analyticsManager.sessionPOST();
  }
})

/**
 * Error tracker for page analytics
 */
window.addEventListener("error", (event) => {
  analyticsManager.addSessionError(analyticsPageName, event.error.name, event.error.message, event.error.stack);
})

function getCategory() {
  return QuestionCategories.Work;
}
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Background_Background.html">Background</a></li><li><a href="Constellation_Constellation.html">Constellation</a></li></ul><h3>Global</h3><ul><li><a href="global.html#addSessionCategorySelected">addSessionCategorySelected</a></li><li><a href="global.html#addSessionClick">addSessionClick</a></li><li><a href="global.html#addSessionError">addSessionError</a></li><li><a href="global.html#addSessionPageTime">addSessionPageTime</a></li><li><a href="global.html#animateText">animateText</a></li><li><a href="global.html#displayText">displayText</a></li><li><a href="global.html#fetchResponses">fetchResponses</a></li><li><a href="global.html#getEmptySession">getEmptySession</a></li><li><a href="global.html#getSession">getSession</a></li><li><a href="global.html#init">init</a></li><li><a href="global.html#makeid">makeid</a></li><li><a href="global.html#redirectToPage">redirectToPage</a></li><li><a href="global.html#sessionStarSelectedInc">sessionStarSelectedInc</a></li><li><a href="global.html#setCanvasPanning">setCanvasPanning</a></li><li><a href="global.html#setEmptySession">setEmptySession</a></li><li><a href="global.html#setSelection">setSelection</a></li><li><a href="global.html#setSessionExit">setSessionExit</a></li><li><a href="global.html#setSessionStatus">setSessionStatus</a></li><li><a href="global.html#startTime">startTime</a></li><li><a href="global.html#toSkyMapPage">toSkyMapPage</a></li><li><a href="global.html#writeSession">writeSession</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.7</a> on Thu Jun 08 2023 23:12:59 GMT+0000 (Coordinated Universal Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
